<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: domain/models/Department.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: domain/models/Department.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Department Model - Organizational Unit Management for Amexing Platform
 * Represents departments within client organizations for budget and team management.
 * Follows AI agent data lifecycle rules with active/exists pattern.
 *
 * Features:
 * - Budget allocation and tracking
 * - Team member management
 * - Manager assignment and delegation
 * - AI agent compliant lifecycle operations
 * - Comprehensive audit trails.
 * @author Amexing Development Team
 * @version 1.0.0
 * @since 2024-09-22
 */

const BaseModel = require('./BaseModel');
const logger = require('../../infrastructure/logger');

/**
 * Department class representing organizational units within client companies.
 * Implements BaseModel for consistent lifecycle management across the platform.
 */
class Department extends BaseModel {
  constructor() {
    super('Department');
  }

  /**
   * Creates a new Department instance with default lifecycle values.
   * Follows AI agent rules for data creation.
   * @param {object} departmentData - Department data object.
   * @returns {Department} New Department instance.
   * @example
   * // const instance = new ModelName(data);
   * // const result = await instance.save();
   */
  static create(departmentData) {
    const department = new Department();

    // Core business fields
    department.set('name', departmentData.name);
    department.set('description', departmentData.description || '');
    department.set('managerId', departmentData.managerId || null);
    department.set('clientId', departmentData.clientId);

    // Budget and cost management
    department.set('budget', departmentData.budget || 0);
    department.set('costCenter', departmentData.costCenter || null);

    // Lifecycle fields are set by BaseModel constructor
    // active: true, exists: true are defaults

    // Audit fields
    department.set('createdBy', departmentData.createdBy || null);
    department.set('modifiedBy', departmentData.modifiedBy || null);

    return department;
  }

  /**
   * Get the department manager.
   * Uses AI agent compliant queries.
   * @returns {Promise&lt;object | null>} Department manager or null.
   * @example
   * // Example usage:
   * // const result = await methodName(params);
   * // Returns appropriate result based on operation
   */
  async getManager() {
    try {
      if (!this.get('managerId')) {
        return null;
      }

      const AmexingUser = require('./AmexingUser');
      const query = BaseModel.queryActive('AmexingUser');
      query.equalTo('objectId', this.get('managerId'));

      return await query.first({ useMasterKey: true });
    } catch (error) {
      logger.error('Error fetching department manager', {
        departmentId: this.id,
        managerId: this.get('managerId'),
        error: error.message,
      });
      return null;
    }
  }

  /**
   * Get all active employees in this department.
   * Uses AI agent compliant queries.
   * @param {object} options - Query options.
   * @returns {Promise&lt;Array>} Array of department employees.
   * @example
   * // Example usage:
   * // const result = await methodName(params);
   * // Returns appropriate result based on operation
   */
  async getEmployees(options = {}) {
    try {
      const {
        includeManager = true,
        role = null,
        active = true,
      } = options;

      const AmexingUser = require('./AmexingUser');
      let query;

      if (active) {
        query = BaseModel.queryActive('AmexingUser');
      } else {
        query = BaseModel.queryExisting('AmexingUser');
      }

      query.equalTo('departmentId', this.id);

      // Filter by role if specified
      if (role) {
        query.equalTo('role', role);
      } else {
        // Include both employees and department managers
        const allowedRoles = includeManager
          ? ['employee', 'department_manager']
          : ['employee'];
        query.containedIn('role', allowedRoles);
      }

      query.addOrder('lastName', 'ascending');
      query.addOrder('firstName', 'ascending');

      return await query.find({ useMasterKey: true });
    } catch (error) {
      logger.error('Error fetching department employees', {
        departmentId: this.id,
        options,
        error: error.message,
      });
      throw error;
    }
  }

  /**
   * Get the parent client for this department.
   * Uses AI agent compliant queries.
   * @returns {Promise&lt;object | null>} Parent client or null.
   * @example
   * // Example usage:
   * // const result = await methodName(params);
   * // Returns appropriate result based on operation
   */
  async getClient() {
    try {
      if (!this.get('clientId')) {
        return null;
      }

      const Client = require('./Client');
      const query = BaseModel.queryActive('Client');
      query.equalTo('objectId', this.get('clientId'));

      return await query.first({ useMasterKey: true });
    } catch (error) {
      logger.error('Error fetching department client', {
        departmentId: this.id,
        clientId: this.get('clientId'),
        error: error.message,
      });
      return null;
    }
  }

  /**
   * Get department statistics for dashboard display.
   * @returns {Promise&lt;object>} Department statistics object.
   * @example
   * // Example usage:
   * // const result = await methodName(params);
   * // Returns appropriate result based on operation
   */
  async getStatistics() {
    try {
      const [employeeCount, activeOrders, budgetUsed] = await Promise.all([
        this.getEmployeeCount(),
        this.getActiveOrderCount(),
        this.getBudgetUsed(),
      ]);

      const budget = this.get('budget') || 0;
      const budgetRemaining = budget - budgetUsed;
      const budgetUtilization = budget > 0 ? (budgetUsed / budget) * 100 : 0;

      return {
        employeeCount,
        activeOrderCount: activeOrders,
        budget,
        budgetUsed,
        budgetRemaining,
        budgetUtilization: Math.round(budgetUtilization * 100) / 100,
        isActive: this.get('active'),
        manager: await this.getManager(),
        createdAt: this.get('createdAt'),
        lastModified: this.get('updatedAt'),
      };
    } catch (error) {
      logger.error('Error fetching department statistics', {
        departmentId: this.id,
        error: error.message,
      });
      return {
        employeeCount: 0,
        activeOrderCount: 0,
        budget: this.get('budget') || 0,
        budgetUsed: 0,
        budgetRemaining: this.get('budget') || 0,
        budgetUtilization: 0,
        isActive: this.get('active'),
        manager: null,
        createdAt: this.get('createdAt'),
        lastModified: this.get('updatedAt'),
      };
    }
  }

  /**
   * Get count of active employees in this department.
   * @returns {Promise&lt;number>} Employee count.
   * @example
   * // Example usage:
   * // const result = await methodName(params);
   * // Returns appropriate result based on operation
   */
  async getEmployeeCount() {
    try {
      const query = BaseModel.queryActive('AmexingUser');
      query.equalTo('departmentId', this.id);
      query.containedIn('role', ['employee', 'department_manager']);
      return await query.count({ useMasterKey: true });
    } catch (error) {
      return 0;
    }
  }

  /**
   * Get count of active orders for this department.
   * @returns {Promise&lt;number>} Active order count.
   * @example
   * // Example usage:
   * // const result = await methodName(params);
   * // Returns appropriate result based on operation
   */
  async getActiveOrderCount() {
    try {
      const query = BaseModel.queryActive('Order');
      query.equalTo('departmentId', this.id);
      query.containedIn('status', ['pending', 'confirmed', 'in_progress']);
      return await query.count({ useMasterKey: true });
    } catch (error) {
      return 0;
    }
  }

  /**
   * Calculate total budget used by this department.
   * @returns {Promise&lt;number>} Budget used amount.
   * @example
   * // Example usage:
   * // const result = await methodName(params);
   * // Returns appropriate result based on operation
   */
  async getBudgetUsed() {
    try {
      // This would typically aggregate from Order costs
      // For now, return 0 - implement based on Order model structure
      const query = BaseModel.queryActive('Order');
      query.equalTo('departmentId', this.id);
      query.select('cost');

      const orders = await query.find({ useMasterKey: true });
      return orders.reduce((total, order) => total + (order.get('cost') || 0), 0);
    } catch (error) {
      logger.error('Error calculating budget used', {
        departmentId: this.id,
        error: error.message,
      });
      return 0;
    }
  }

  /**
   * Assign a manager to this department.
   * @param {string} userId - User ID to assign as manager.
   * @param {string} assignedBy - User ID performing the assignment.
   * @returns {Promise&lt;boolean>} Success status.
   * @example
   * // const isValid = validator.validate(data);
   * // Returns: boolean or validation result object
   */
  async assignManager(userId, assignedBy) {
    try {
      // Validate that the user exists and has appropriate role
      const AmexingUser = require('./AmexingUser');
      const userQuery = BaseModel.queryActive('AmexingUser');
      userQuery.equalTo('objectId', userId);
      const user = await userQuery.first({ useMasterKey: true });

      if (!user) {
        throw new Error('User not found or not active');
      }

      // Check if user can be a department manager
      const allowedRoles = ['department_manager', 'admin', 'client'];
      if (!allowedRoles.includes(user.get('role'))) {
        throw new Error('User role not eligible for department management');
      }

      // Update user role to department_manager if they're an employee
      if (user.get('role') === 'employee') {
        user.set('role', 'department_manager');
        user.set('modifiedBy', assignedBy);
        await user.save(null, { useMasterKey: true });
      }

      // Assign user as department manager
      this.set('managerId', userId);
      this.set('modifiedBy', assignedBy);
      this.set('updatedAt', new Date());

      await this.save(null, { useMasterKey: true });

      logger.info('Department manager assigned', {
        departmentId: this.id,
        managerId: userId,
        assignedBy,
        managerEmail: user.get('email'),
      });

      return true;
    } catch (error) {
      logger.error('Error assigning department manager', {
        departmentId: this.id,
        userId,
        assignedBy,
        error: error.message,
      });
      throw error;
    }
  }

  /**
   * Remove the current manager from this department.
   * @param {string} removedBy - User ID performing the removal.
   * @param {boolean} demoteUser - Whether to demote user back to employee.
   * @returns {Promise&lt;boolean>} Success status.
   * @example
   * // Example usage:
   * // const result = await methodName(params);
   * // Returns appropriate result based on operation
   */
  async removeManager(removedBy, demoteUser = false) {
    try {
      const currentManagerId = this.get('managerId');

      if (!currentManagerId) {
        return true; // No manager to remove
      }

      if (demoteUser) {
        // Demote current manager to employee if requested
        const AmexingUser = require('./AmexingUser');
        const userQuery = BaseModel.queryActive('AmexingUser');
        userQuery.equalTo('objectId', currentManagerId);
        const user = await userQuery.first({ useMasterKey: true });

        if (user &amp;&amp; user.get('role') === 'department_manager') {
          user.set('role', 'employee');
          user.set('modifiedBy', removedBy);
          await user.save(null, { useMasterKey: true });
        }
      }

      // Remove manager from department
      this.set('managerId', null);
      this.set('modifiedBy', removedBy);
      this.set('updatedAt', new Date());

      await this.save(null, { useMasterKey: true });

      logger.info('Department manager removed', {
        departmentId: this.id,
        formerManagerId: currentManagerId,
        removedBy,
        demotedUser: demoteUser,
      });

      return true;
    } catch (error) {
      logger.error('Error removing department manager', {
        departmentId: this.id,
        removedBy,
        demoteUser,
        error: error.message,
      });
      throw error;
    }
  }

  /**
   * Update department budget allocation.
   * @param {number} newBudget - New budget amount.
   * @param {string} modifiedBy - User ID making the update.
   * @param {string} reason - Reason for budget change.
   * @returns {Promise&lt;boolean>} Success status.
   * @example
   * // Example usage:
   * // const result = await methodName(params);
   * // Returns appropriate result based on operation
   */
  async updateBudget(newBudget, modifiedBy, reason = '') {
    try {
      const oldBudget = this.get('budget') || 0;

      this.set('budget', newBudget);
      this.set('modifiedBy', modifiedBy);
      this.set('updatedAt', new Date());

      await this.save(null, { useMasterKey: true });

      logger.info('Department budget updated', {
        departmentId: this.id,
        oldBudget,
        newBudget,
        modifiedBy,
        reason,
      });

      return true;
    } catch (error) {
      logger.error('Error updating department budget', {
        departmentId: this.id,
        newBudget,
        modifiedBy,
        reason,
        error: error.message,
      });
      throw error;
    }
  }

  /**
   * Add an employee to this department.
   * @param {string} userId - User ID to add to department.
   * @param {string} addedBy - User ID performing the addition.
   * @returns {Promise&lt;boolean>} Success status.
   * @example
   * // Example usage:
   * // const result = await methodName(params);
   * // Returns appropriate result based on operation
   */
  async addEmployee(userId, addedBy) {
    try {
      const AmexingUser = require('./AmexingUser');
      const userQuery = BaseModel.queryActive('AmexingUser');
      userQuery.equalTo('objectId', userId);
      const user = await userQuery.first({ useMasterKey: true });

      if (!user) {
        throw new Error('User not found or not active');
      }

      // Update user's department
      user.set('departmentId', this.id);
      user.set('modifiedBy', addedBy);
      await user.save(null, { useMasterKey: true });

      logger.info('Employee added to department', {
        departmentId: this.id,
        userId,
        addedBy,
        userEmail: user.get('email'),
      });

      return true;
    } catch (error) {
      logger.error('Error adding employee to department', {
        departmentId: this.id,
        userId,
        addedBy,
        error: error.message,
      });
      throw error;
    }
  }

  /**
   * Remove an employee from this department.
   * @param {string} userId - User ID to remove from department.
   * @param {string} removedBy - User ID performing the removal.
   * @returns {Promise&lt;boolean>} Success status.
   * @example
   * // Example usage:
   * // const result = await methodName(params);
   * // Returns appropriate result based on operation
   */
  async removeEmployee(userId, removedBy) {
    try {
      const AmexingUser = require('./AmexingUser');
      const userQuery = BaseModel.queryActive('AmexingUser');
      userQuery.equalTo('objectId', userId);
      const user = await userQuery.first({ useMasterKey: true });

      if (!user) {
        throw new Error('User not found or not active');
      }

      // Remove user from department
      user.unset('departmentId');
      user.set('modifiedBy', removedBy);
      await user.save(null, { useMasterKey: true });

      logger.info('Employee removed from department', {
        departmentId: this.id,
        userId,
        removedBy,
        userEmail: user.get('email'),
      });

      return true;
    } catch (error) {
      logger.error('Error removing employee from department', {
        departmentId: this.id,
        userId,
        removedBy,
        error: error.message,
      });
      throw error;
    }
  }

  /**
   * Get safe department data for API responses.
   * Excludes sensitive information.
   * @returns {object} Safe department data.
   * @example
   * // Example usage:
   * // const result = await methodName(params);
   * // Returns appropriate result based on operation
   */
  toSafeJSON() {
    return {
      id: this.id,
      name: this.get('name'),
      description: this.get('description'),
      managerId: this.get('managerId'),
      clientId: this.get('clientId'),
      budget: this.get('budget'),
      costCenter: this.get('costCenter'),
      active: this.get('active'),
      exists: this.get('exists'),
      createdAt: this.get('createdAt'),
      updatedAt: this.get('updatedAt'),
      createdBy: this.get('createdBy'),
      modifiedBy: this.get('modifiedBy'),
    };
  }

  /**
   * Validate department data before save operations.
   * @param {object} departmentData - Data to validate.
   * @returns {Array} Array of validation errors.
   * @example
   * // const isValid = validator.validate(data);
   * // Returns: boolean or validation result object
   */
  static validate(departmentData) {
    const errors = [];

    // Required fields
    if (!departmentData.name || departmentData.name.trim() === '') {
      errors.push('Department name is required');
    }

    if (!departmentData.clientId || departmentData.clientId.trim() === '') {
      errors.push('Client ID is required');
    }

    // Budget validation
    if (departmentData.budget !== undefined &amp;&amp; departmentData.budget !== null) {
      if (typeof departmentData.budget !== 'number' || departmentData.budget &lt; 0) {
        errors.push('Budget must be a non-negative number');
      }
    }

    // Name length validation
    if (departmentData.name &amp;&amp; departmentData.name.length > 100) {
      errors.push('Department name must be 100 characters or less');
    }

    // Description length validation
    if (departmentData.description &amp;&amp; departmentData.description.length > 500) {
      errors.push('Description must be 500 characters or less');
    }

    return errors;
  }
}

// Register the class with Parse
if (typeof Parse !== 'undefined') {
  Parse.Object.registerSubclass('Department', Department);
}

module.exports = Department;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AdminController.html">AdminController</a></li><li><a href="AmexingAuthMiddleware.html">AmexingAuthMiddleware</a></li><li><a href="AmexingAuthService.html">AmexingAuthService</a></li><li><a href="AmexingUser.html">AmexingUser</a></li><li><a href="ApiController.html">ApiController</a></li><li><a href="AppleIdTokenValidator.html">AppleIdTokenValidator</a></li><li><a href="AppleOAuthService.html">AppleOAuthService</a></li><li><a href="AppleOAuthServiceCore.html">AppleOAuthServiceCore</a></li><li><a href="AppleSignInButton.html">AppleSignInButton</a></li><li><a href="AppleTokenExchanger.html">AppleTokenExchanger</a></li><li><a href="AuthController.html">AuthController</a></li><li><a href="AuthMiddleware.html">AuthMiddleware</a></li><li><a href="AuthenticationService.html">AuthenticationService</a></li><li><a href="AuthenticationServiceCore.html">AuthenticationServiceCore</a></li><li><a href="BaseController.html">BaseController</a></li><li><a href="Client.html">Client</a></li><li><a href="ClientController.html">ClientController</a></li><li><a href="CorporateOAuthInterface.html">CorporateOAuthInterface</a></li><li><a href="CorporateOAuthService.html">CorporateOAuthService</a></li><li><a href="CorporateSyncService.html">CorporateSyncService</a></li><li><a href="DashboardAuthMiddleware.html">DashboardAuthMiddleware</a></li><li><a href="DashboardController.html">DashboardController</a></li><li><a href="Department.html">Department</a></li><li><a href="DepartmentManagerController.html">DepartmentManagerController</a></li><li><a href="DepartmentOAuthFlowService.html">DepartmentOAuthFlowService</a></li><li><a href="DriverController.html">DriverController</a></li><li><a href="EmployeeController.html">EmployeeController</a></li><li><a href="GuestController.html">GuestController</a></li><li><a href="HomeController.html">HomeController</a></li><li><a href="IntelligentProviderSelector.html">IntelligentProviderSelector</a></li><li><a href="MobileOAuthOptimizer.html">MobileOAuthOptimizer</a></li><li><a href="NotificationsController.html">NotificationsController</a></li><li><a href="OAuthPermissionService.html">OAuthPermissionService</a></li><li><a href="OAuthProvider.html">OAuthProvider</a></li><li><a href="OAuthSecurityValidator.html">OAuthSecurityValidator</a></li><li><a href="OAuthService.html">OAuthService</a></li><li><a href="PermissionAuditService.html">PermissionAuditService</a></li><li><a href="PermissionContextService.html">PermissionContextService</a></li><li><a href="PermissionDelegationService.html">PermissionDelegationService</a></li><li><a href="PermissionInheritanceService.html">PermissionInheritanceService</a></li><li><a href="PermissionService.html">PermissionService</a></li><li><a href="RoleBasedController.html">RoleBasedController</a></li><li><a href="SecureSecretsManager.html">SecureSecretsManager</a></li><li><a href="SecurityMiddleware.html">SecurityMiddleware</a></li><li><a href="SuperAdminController.html">SuperAdminController</a></li><li><a href="UserManagementController.html">UserManagementController</a></li><li><a href="global.html#UserManagementService">UserManagementService</a></li><li><a href="ValidationMiddleware.html">ValidationMiddleware</a></li></ul><h3>Global</h3><ul><li><a href="global.html#BaseModel">BaseModel</a></li><li><a href="global.html#Parse">Parse</a></li><li><a href="global.html#about">about</a></li><li><a href="global.html#addCorporateDomain">addCorporateDomain</a></li><li><a href="global.html#authRateLimit">authRateLimit</a></li><li><a href="global.html#authenticateOptional">authenticateOptional</a></li><li><a href="global.html#authenticateToken">authenticateToken</a></li><li><a href="global.html#autoRefreshToken">autoRefreshToken</a></li><li><a href="global.html#checkUserPermission">checkUserPermission</a></li><li><a href="global.html#createEmergencyElevation">createEmergencyElevation</a></li><li><a href="global.html#createPermissionDelegation">createPermissionDelegation</a></li><li><a href="global.html#createPermissionOverride">createPermissionOverride</a></li><li><a href="global.html#crypto">crypto</a></li><li><a href="global.html#errorHandler">errorHandler</a></li><li><a href="global.html#express">express</a></li><li><a href="global.html#expressRateLimit">expressRateLimit</a></li><li><a href="global.html#extractUser">extractUser</a></li><li><a href="global.html#findUserById">findUserById</a></li><li><a href="global.html#generateCorporateOAuthURL">generateCorporateOAuthURL</a></li><li><a href="global.html#generateTokens">generateTokens</a></li><li><a href="global.html#getActiveDelegations">getActiveDelegations</a></li><li><a href="global.html#getAllSyncStatuses">getAllSyncStatuses</a></li><li><a href="global.html#getAppleOAuthAnalytics">getAppleOAuthAnalytics</a></li><li><a href="global.html#getAppleOAuthConfig">getAppleOAuthConfig</a></li><li><a href="global.html#getAppleUserData">getAppleUserData</a></li><li><a href="global.html#getAvailableContexts">getAvailableContexts</a></li><li><a href="global.html#getAvailableCorporateDomains">getAvailableCorporateDomains</a></li><li><a href="global.html#getAvailableDepartments">getAvailableDepartments</a></li><li><a href="global.html#getAvailablePermissions">getAvailablePermissions</a></li><li><a href="global.html#getCorporateClientDepartments">getCorporateClientDepartments</a></li><li><a href="global.html#getCorporateLandingConfig">getCorporateLandingConfig</a></li><li><a href="global.html#getCorporateSyncHistory">getCorporateSyncHistory</a></li><li><a href="global.html#getData">getData</a></li><li><a href="global.html#getDatabaseMetrics">getDatabaseMetrics</a></li><li><a href="global.html#getDelegatedPermissions">getDelegatedPermissions</a></li><li><a href="global.html#getDepartmentOAuthAnalytics">getDepartmentOAuthAnalytics</a></li><li><a href="global.html#getDepartmentOAuthConfig">getDepartmentOAuthConfig</a></li><li><a href="global.html#getDepartmentOAuthProviders">getDepartmentOAuthProviders</a></li><li><a href="global.html#getDepartmentPermissions">getDepartmentPermissions</a></li><li><a href="global.html#getErrorDetails">getErrorDetails</a></li><li><a href="global.html#getOAuthAuditLogs">getOAuthAuditLogs</a></li><li><a href="global.html#getOAuthProviderStatus">getOAuthProviderStatus</a></li><li><a href="global.html#getPermissionAuditReport">getPermissionAuditReport</a></li><li><a href="global.html#getPermissionAuditStats">getPermissionAuditStats</a></li><li><a href="global.html#getProviderDisplayName">getProviderDisplayName</a></li><li><a href="global.html#getRequestProperty">getRequestProperty</a></li><li><a href="global.html#getRolePermissions">getRolePermissions</a></li><li><a href="global.html#getSecretsManager">getSecretsManager</a></li><li><a href="global.html#getStatus">getStatus</a></li><li><a href="global.html#getSystemMetrics">getSystemMetrics</a></li><li><a href="global.html#getUserEffectivePermissions">getUserEffectivePermissions</a></li><li><a href="global.html#getUserPermissionInheritance">getUserPermissionInheritance</a></li><li><a href="global.html#getUserProfile">getUserProfile</a></li><li><a href="global.html#getVersion">getVersion</a></li><li><a href="global.html#gracefulShutdown">gracefulShutdown</a></li><li><a href="global.html#handleAppleOAuthCallback">handleAppleOAuthCallback</a></li><li><a href="global.html#handleAppleWebhook">handleAppleWebhook</a></li><li><a href="global.html#handleDepartmentOAuthCallback">handleDepartmentOAuthCallback</a></li><li><a href="global.html#handleMongoError">handleMongoError</a></li><li><a href="global.html#handleParseError">handleParseError</a></li><li><a href="global.html#handleValidationError">handleValidationError</a></li><li><a href="global.html#hasPermission">hasPermission</a></li><li><a href="global.html#https">https</a></li><li><a href="global.html#initialize">initialize</a></li><li><a href="global.html#initiateAppleOAuth">initiateAppleOAuth</a></li><li><a href="global.html#initiateDepartmentOAuth">initiateDepartmentOAuth</a></li><li><a href="global.html#jwt">jwt</a></li><li><a href="global.html#loadPrivateKey">loadPrivateKey</a></li><li><a href="global.html#logAccessAttempt">logAccessAttempt</a></li><li><a href="global.html#logDataAccess">logDataAccess</a></li><li><a href="global.html#logError">logError</a></li><li><a href="global.html#logSecurityEvent">logSecurityEvent</a></li><li><a href="global.html#logSystemChange">logSystemChange</a></li><li><a href="global.html#logger">logger</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#optionalAuth">optionalAuth</a></li><li><a href="global.html#recordSuccessfulLogin">recordSuccessfulLogin</a></li><li><a href="global.html#register">register</a></li><li><a href="global.html#registerCloudFunctions">registerCloudFunctions</a></li><li><a href="global.html#requireRole">requireRole</a></li><li><a href="global.html#revokeAppleOAuth">revokeAppleOAuth</a></li><li><a href="global.html#revokePermissionDelegation">revokePermissionDelegation</a></li><li><a href="global.html#setRequestProperty">setRequestProperty</a></li><li><a href="global.html#showForgotPassword">showForgotPassword</a></li><li><a href="global.html#showLogin">showLogin</a></li><li><a href="global.html#showRegister">showRegister</a></li><li><a href="global.html#showResetPassword">showResetPassword</a></li><li><a href="global.html#startPeriodicSync">startPeriodicSync</a></li><li><a href="global.html#stopPeriodicSync">stopPeriodicSync</a></li><li><a href="global.html#switchPermissionContext">switchPermissionContext</a></li><li><a href="global.html#switchToDepartmentContext">switchToDepartmentContext</a></li><li><a href="global.html#testCorporateDomain">testCorporateDomain</a></li><li><a href="global.html#triggerCorporateSync">triggerCorporateSync</a></li><li><a href="global.html#updateUserProfile">updateUserProfile</a></li><li><a href="global.html#validateAppleDomain">validateAppleDomain</a></li><li><a href="global.html#validateCorporateLandingAccess">validateCorporateLandingAccess</a></li><li><a href="global.html#validateDepartmentOAuthAccess">validateDepartmentOAuthAccess</a></li><li><a href="global.html#validateLogin">validateLogin</a></li><li><a href="global.html#validateNewPassword">validateNewPassword</a></li><li><a href="global.html#validatePassword">validatePassword</a></li><li><a href="global.html#validatePasswordReset">validatePasswordReset</a></li><li><a href="global.html#validateRegistration">validateRegistration</a></li><li><a href="global.html#validateRequest">validateRequest</a></li><li><a href="global.html#validateUpdateProfile">validateUpdateProfile</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Sep 24 2025 12:14:54 GMT-0600 (hora est√°ndar central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
